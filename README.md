# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде - Документо-ориентированная БД MongoDB, например. Связано это с тем, что документ в представлении данных типов БД хранит данные в виде ключ-значение и связей с другими документами, что прекрасно ложится на json формат.
- Склады и автомобильные дороги для логистической компании - Здесь мой выбор пал на графовую БД, т.к. такие сущности, как узел, ребро и свойства прекрасно ложатся на логистику с определением наиболее релевантного маршрута между складами.
- Генеалогические деревья - Иерархическая БД, поскольку наша задача имеет древовидную структуру, и связи в отношениях завязаны на родитель-потомок (также, как и в БД)
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации - key-value db, т.к. по-сути нужно связать id клиента и его кэш на некое время. При такой БД это наиболее оптимально по ресурсам и быстродействию
- Отношения клиент-покупка для интернет-магазина - Реляционная БД, например, PostgreSQL, т.к. в ее основе лежат отношения (таблицы) состоящие из атрибутов и записей. Для этой задачи — это весьма удобно. Плюс для формирования  анализа спроса товаров осуществлять выборку легко и просто.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись) - AP (PA/EC)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера - CA  (PA/EL)
- Система может не прислать корректный ответ или сбросить соединение - CP (PC/EC)

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Нет, поскольку они взаимоисключающие. ACID позволяет проектировать высоконадежные системы где ключевое место уделяется согласованности, а BASE делает упор на высокопроизводительности систем и быстроте транзакций.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

Один из примеров такого key-value хранилища - REDIS
publish–subscribe (издатель-подписчик) -  поведенческий шаблон проектирования передачи сообщений, в котором отправители сообщений, именуемые издателями (англ. publishers), напрямую не привязаны программным кодом отправки сообщений к подписчикам (англ. subscribers).
Минусы таких систем:
- Прожорливый в плане оперативы;
- Высокий риск потери данных (например, при сбое сервера данные после последней синхры с диском пропадают);
- Отсутствует поддержка языка SQL;
- Отсутствие очередей сообщений.
